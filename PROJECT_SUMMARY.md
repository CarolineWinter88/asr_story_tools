# AIæœ‰å£°ä¹¦å·¥å…· - é¡¹ç›®æ€»ç»“

## ğŸ“‹ é¡¹ç›®æ¦‚è§ˆ

AIæœ‰å£°ä¹¦å·¥å…·æ˜¯ä¸€ä¸ªå®Œæ•´çš„å…¨æ ˆWebåº”ç”¨ï¼Œç”¨äºå°†æ–‡æœ¬å°è¯´è½¬æ¢ä¸ºæœ‰å£°è¯»ç‰©ã€‚è¯¥é¡¹ç›®é‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œæ”¯æŒDockerå®¹å™¨åŒ–éƒ¨ç½²ï¼Œå¯åœ¨å±€åŸŸç½‘å†…ä½¿ç”¨ã€‚

### æŠ€æœ¯æ ˆ

**å‰ç«¯**
- Vue 3 (Composition API)
- TypeScript
- Vite
- Element Plus
- Pinia (çŠ¶æ€ç®¡ç†)
- Vue Router

**åç«¯**
- Python 3.10+
- FastAPI
- SQLAlchemy (ORM)
- Pydantic (æ•°æ®éªŒè¯)
- PyMySQL

**æ•°æ®åº“**
- MySQL 8.0

**éƒ¨ç½²**
- Docker
- Docker Compose
- Nginx

## ğŸ—‚ï¸ é¡¹ç›®ç»“æ„

```
asr_story_tools/
â”œâ”€â”€ backend/                    # FastAPIåç«¯
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/               # APIè·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ projects.py    # é¡¹ç›®ç®¡ç†API
â”‚   â”‚   â”‚   â”œâ”€â”€ chapters.py    # ç« èŠ‚ç®¡ç†API
â”‚   â”‚   â”‚   â”œâ”€â”€ characters.py  # è§’è‰²ç®¡ç†API
â”‚   â”‚   â”‚   â”œâ”€â”€ dialogues.py   # å¯¹è¯ç¼–è¾‘API
â”‚   â”‚   â”‚   â””â”€â”€ audio.py       # éŸ³é¢‘å¤„ç†API
â”‚   â”‚   â”œâ”€â”€ models/            # SQLAlchemyæ•°æ®æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ project.py
â”‚   â”‚   â”‚   â”œâ”€â”€ chapter.py
â”‚   â”‚   â”‚   â”œâ”€â”€ character.py
â”‚   â”‚   â”‚   â”œâ”€â”€ dialogue.py
â”‚   â”‚   â”‚   â””â”€â”€ audio_export.py
â”‚   â”‚   â”œâ”€â”€ schemas/           # PydanticéªŒè¯æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ services/          # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ text_parser.py    # æ–‡æœ¬è§£ææœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ audio_service.py  # éŸ³é¢‘å¤„ç†æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ tts_base.py       # TTSæŠ½è±¡åŸºç±»
â”‚   â”‚   â”‚   â””â”€â”€ tts_factory.py    # TTSå·¥å‚ç±»
â”‚   â”‚   â”œâ”€â”€ core/              # æ ¸å¿ƒé…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ config.py      # åº”ç”¨é…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ database.py    # æ•°æ®åº“è¿æ¥
â”‚   â”‚   â”‚   â”œâ”€â”€ exceptions.py  # è‡ªå®šä¹‰å¼‚å¸¸
â”‚   â”‚   â”‚   â””â”€â”€ response.py    # å“åº”æ ¼å¼
â”‚   â”‚   â””â”€â”€ utils/             # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ migrations/            # æ•°æ®åº“è¿ç§»è„šæœ¬
â”‚   â”‚   â””â”€â”€ init.sql          # åˆå§‹åŒ–SQL
â”‚   â”œâ”€â”€ main.py               # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ requirements.txt      # Pythonä¾èµ–
â”‚   â””â”€â”€ Dockerfile           # Dockeré•œåƒé…ç½®
â”‚
â”œâ”€â”€ frontend/                  # Vue3å‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ views/            # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectList.vue      # é¡¹ç›®åˆ—è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectDetail.vue    # é¡¹ç›®è¯¦æƒ…
â”‚   â”‚   â”‚   â”œâ”€â”€ TextImport.vue       # æ–‡æœ¬å¯¼å…¥
â”‚   â”‚   â”‚   â”œâ”€â”€ VoiceConfig.vue      # æ™ºèƒ½é…éŸ³
â”‚   â”‚   â”‚   â”œâ”€â”€ DialogueEditor.vue   # å¯¹è¯ç¼–è¾‘å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ AudioPreview.vue     # éŸ³é¢‘é¢„è§ˆ
â”‚   â”‚   â”‚   â””â”€â”€ ExportPage.vue       # å¯¼å‡ºé¡µé¢
â”‚   â”‚   â”œâ”€â”€ components/       # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ AudioPlayer.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ DialogueBlock.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ DialogueEditBlock.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ CharacterCard.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ ChapterList.vue
â”‚   â”‚   â”‚   â””â”€â”€ ProjectCard.vue
â”‚   â”‚   â”œâ”€â”€ api/             # APIè°ƒç”¨æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ project.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ chapter.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ character.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ dialogue.ts
â”‚   â”‚   â”‚   â””â”€â”€ audio.ts
â”‚   â”‚   â”œâ”€â”€ stores/          # PiniaçŠ¶æ€ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ project.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ chapter.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ character.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ dialogue.ts
â”‚   â”‚   â”‚   â””â”€â”€ audio.ts
â”‚   â”‚   â”œâ”€â”€ router/          # è·¯ç”±é…ç½®
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ types/           # TypeScriptç±»å‹å®šä¹‰
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â””â”€â”€ utils/           # å·¥å…·å‡½æ•°
â”‚   â”‚       â””â”€â”€ http.ts      # Axioså°è£…
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ vite.config.ts
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ nginx.conf
â”‚
â”œâ”€â”€ storage/                  # æ–‡ä»¶å­˜å‚¨ç›®å½•
â”‚   â”œâ”€â”€ uploads/             # ä¸Šä¼ çš„æ–‡æœ¬æ–‡ä»¶
â”‚   â”œâ”€â”€ audio/               # ç”Ÿæˆçš„éŸ³é¢‘æ–‡ä»¶
â”‚   â””â”€â”€ temp/                # ä¸´æ—¶æ–‡ä»¶
â”‚
â”œâ”€â”€ docker-compose.yml       # Docker Composeé…ç½®
â”œâ”€â”€ env.example             # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ deploy.sh               # ä¸€é”®éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ DEPLOYMENT.md           # éƒ¨ç½²æŒ‡å—
â””â”€â”€ PROJECT_SUMMARY.md      # æœ¬æ–‡ä»¶
```

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. é¡¹ç›®ç®¡ç†
- âœ… åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤é¡¹ç›®
- âœ… é¡¹ç›®åˆ—è¡¨å±•ç¤ºï¼ˆå¡ç‰‡å¼ï¼‰
- âœ… é¡¹ç›®è¯¦æƒ…é¡µé¢
- âœ… é¡¹ç›®ç»Ÿè®¡æ•°æ®

### 2. æ–‡æœ¬å¯¼å…¥
- âœ… æ”¯æŒTXTæ–‡ä»¶ä¸Šä¼ 
- âœ… æ™ºèƒ½ç« èŠ‚è¯†åˆ«ï¼ˆåŸºäºæ­£åˆ™è¡¨è¾¾å¼ï¼‰
- âœ… ç« èŠ‚å†…å®¹é¢„è§ˆå’Œç¼–è¾‘
- âœ… æ‰¹é‡ä¸Šä¼ å¤„ç†

### 3. è§’è‰²ç®¡ç†
- âœ… AIè‡ªåŠ¨è¯†åˆ«è§’è‰²ï¼ˆåŸºäºå¯¹è¯æ ‡è®°ï¼‰
- âœ… è§’è‰²å£°éŸ³é…ç½®
- âœ… TTSå¼•æ“é€‰æ‹©ï¼ˆAzure/é˜¿é‡Œäº‘/è…¾è®¯äº‘ç­‰ï¼‰
- âœ… è§’è‰²ç»Ÿè®¡ä¿¡æ¯

### 4. å¯¹è¯ç¼–è¾‘
- âœ… ç« èŠ‚å¯¹è¯åˆ—è¡¨
- âœ… å¯¹è¯ç±»å‹ç®¡ç†ï¼ˆå¯¹è¯/æ—ç™½ï¼‰
- âœ… å¯¹è¯å†…å®¹ç¼–è¾‘
- âœ… è¯­éŸ³å‚æ•°è°ƒæ•´ï¼ˆè¯­é€Ÿã€éŸ³è°ƒã€éŸ³é‡ï¼‰
- âœ… å¯¹è¯æ’åºå’Œåˆ é™¤

### 5. éŸ³é¢‘ç”Ÿæˆ
- âœ… å•æ®µéŸ³é¢‘ç”Ÿæˆ
- âœ… æ‰¹é‡éŸ³é¢‘ç”Ÿæˆ
- âœ… TTSæœåŠ¡æŠ½è±¡å±‚ï¼ˆæ”¯æŒå¤šå¼•æ“ï¼‰
- âœ… éŸ³é¢‘çŠ¶æ€è¿½è¸ª

### 6. éŸ³é¢‘é¢„è§ˆ
- âœ… æ³¢å½¢å¯è§†åŒ–
- âœ… éŸ³é¢‘æ’­æ”¾å™¨
- âœ… æ®µè½å¯¼èˆª
- âœ… æ’­æ”¾é€Ÿåº¦æ§åˆ¶
- âœ… éŸ³é¢‘å±æ€§æŸ¥çœ‹

### 7. å¯¼å‡ºåŠŸèƒ½
- âœ… å¤šæ ¼å¼æ”¯æŒï¼ˆMP3/WAV/M4A/OGGï¼‰
- âœ… éŸ³è´¨é€‰æ‹©ï¼ˆæ ‡å‡†/é«˜/è¶…é«˜ï¼‰
- âœ… ç« èŠ‚èŒƒå›´é€‰æ‹©
- âœ… åˆå¹¶å¯¼å‡ºé€‰é¡¹
- âœ… å¯¼å‡ºå†å²è®°å½•

### 8. ç³»ç»Ÿè®¾ç½®
- âœ… TTSå¼•æ“é…ç½®
- âœ… éŸ³é¢‘å‚æ•°è®¾ç½®
- âœ… æ–‡ä»¶å­˜å‚¨ç®¡ç†

## ğŸ“Š æ•°æ®åº“è®¾è®¡

### æ ¸å¿ƒè¡¨

**projects** - é¡¹ç›®è¡¨
- id, name, description, cover_image
- status, chapters_count, characters_count, total_duration
- created_at, updated_at

**chapters** - ç« èŠ‚è¡¨
- id, project_id, title, order_index
- content, word_count, status, duration

**characters** - è§’è‰²è¡¨
- id, project_id, name, avatar, description
- dialogue_count, total_duration, voice_config (JSON)

**dialogues** - å¯¹è¯/æ—ç™½è¡¨
- id, chapter_id, order_index, type
- content, character_id, start_time, end_time
- audio_path, status, voice_config (JSON), pause_after

**audio_exports** - å¯¼å‡ºè®°å½•è¡¨
- id, project_id, format, quality
- file_path, file_size, export_range (JSON)

## ğŸ”Œ APIæ¥å£

### é¡¹ç›®ç®¡ç†
- `POST /api/projects` - åˆ›å»ºé¡¹ç›®
- `GET /api/projects` - é¡¹ç›®åˆ—è¡¨
- `GET /api/projects/{id}` - é¡¹ç›®è¯¦æƒ…
- `PUT /api/projects/{id}` - æ›´æ–°é¡¹ç›®
- `DELETE /api/projects/{id}` - åˆ é™¤é¡¹ç›®

### ç« èŠ‚ç®¡ç†
- `GET /api/chapters?project_id={id}` - ç« èŠ‚åˆ—è¡¨
- `GET /api/chapters/{id}` - ç« èŠ‚è¯¦æƒ…
- `POST /api/chapters/upload` - ä¸Šä¼ ç« èŠ‚æ–‡ä»¶
- `PUT /api/chapters/{id}` - æ›´æ–°ç« èŠ‚
- `DELETE /api/chapters/{id}` - åˆ é™¤ç« èŠ‚

### è§’è‰²ç®¡ç†
- `GET /api/characters?project_id={id}` - è§’è‰²åˆ—è¡¨
- `GET /api/characters/{id}` - è§’è‰²è¯¦æƒ…
- `POST /api/characters/extract` - æå–è§’è‰²
- `POST /api/characters` - åˆ›å»ºè§’è‰²
- `PUT /api/characters/{id}` - æ›´æ–°è§’è‰²
- `DELETE /api/characters/{id}` - åˆ é™¤è§’è‰²

### å¯¹è¯ç¼–è¾‘
- `GET /api/dialogues?chapter_id={id}` - å¯¹è¯åˆ—è¡¨
- `GET /api/dialogues/{id}` - å¯¹è¯è¯¦æƒ…
- `POST /api/dialogues` - åˆ›å»ºå¯¹è¯
- `PUT /api/dialogues/{id}` - æ›´æ–°å¯¹è¯
- `DELETE /api/dialogues/{id}` - åˆ é™¤å¯¹è¯
- `POST /api/dialogues/parse` - è§£æç« èŠ‚å¯¹è¯

### éŸ³é¢‘å¤„ç†
- `POST /api/audio/generate` - ç”Ÿæˆå•æ®µéŸ³é¢‘
- `POST /api/audio/batch-generate` - æ‰¹é‡ç”Ÿæˆ
- `POST /api/audio/export` - å¯¼å‡ºéŸ³é¢‘
- `GET /api/audio/exports?project_id={id}` - å¯¼å‡ºå†å²

## ğŸš€ éƒ¨ç½²è¯´æ˜

### ç¯å¢ƒè¦æ±‚
- Docker 20.10+
- Docker Compose 2.0+
- 4GB+ å†…å­˜
- 10GB+ ç£ç›˜ç©ºé—´

### å¿«é€Ÿéƒ¨ç½²

```bash
# 1. å…‹éš†é¡¹ç›®
cd asr_story_tools

# 2. è¿è¡Œéƒ¨ç½²è„šæœ¬
./deploy.sh
```

### è®¿é—®åœ°å€
- **å‰ç«¯**: http://localhost:80
- **åç«¯API**: http://localhost:8000
- **APIæ–‡æ¡£**: http://localhost:8000/docs

è¯¦ç»†éƒ¨ç½²è¯´æ˜è¯·å‚è€ƒ [DEPLOYMENT.md](./DEPLOYMENT.md)

## ğŸ¨ å‰ç«¯é¡µé¢

### é¡µé¢åˆ—è¡¨

1. **ProjectList** (/)
   - é¡¹ç›®å¡ç‰‡ç½‘æ ¼å±•ç¤º
   - åˆ›å»ºæ–°é¡¹ç›®
   - é¡¹ç›®æœç´¢å’Œç­›é€‰

2. **ProjectDetail** (/projects/:id)
   - é¡¹ç›®ä¿¡æ¯å±•ç¤º
   - ç»Ÿè®¡å¡ç‰‡
   - ç« èŠ‚åˆ—è¡¨
   - å¿«æ·æ“ä½œ

3. **TextImport** (/projects/:id/import)
   - æ–‡ä»¶æ‹–æ‹½ä¸Šä¼ 
   - æ–‡æœ¬ç²˜è´´å¯¼å…¥
   - ç« èŠ‚é¢„è§ˆ
   - ç« èŠ‚è¯†åˆ«é…ç½®

4. **VoiceConfig** (/projects/:id/voice-config)
   - è§’è‰²åˆ—è¡¨
   - å£°éŸ³é…ç½®
   - TTSå¼•æ“é€‰æ‹©
   - è¯•å¬åŠŸèƒ½

5. **DialogueEditor** (/projects/:id/editor)
   - ä¸‰æ å¸ƒå±€
   - ç« èŠ‚åˆ‡æ¢
   - å¯¹è¯ç¼–è¾‘
   - å±æ€§é¢æ¿

6. **AudioPreview** (/projects/:id/audio-preview/:chapterId)
   - æ³¢å½¢å¯è§†åŒ–
   - éŸ³é¢‘æ’­æ”¾å™¨
   - æ®µè½åˆ—è¡¨
   - å±æ€§æ£€æŸ¥å™¨

7. **ExportPage** (/projects/:id/export)
   - å¯¼å‡ºè®¾ç½®
   - æ ¼å¼é€‰æ‹©
   - éŸ³è´¨é…ç½®
   - å¯¼å‡ºå†å²

## ğŸ”§ å¼€å‘æŒ‡å—

### åç«¯å¼€å‘

```bash
cd backend

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# è¿è¡Œå¼€å‘æœåŠ¡å™¨
python main.py
```

### å‰ç«¯å¼€å‘

```bash
cd frontend

# å®‰è£…ä¾èµ–
npm install

# è¿è¡Œå¼€å‘æœåŠ¡å™¨
npm run dev
```

### APIæ–‡æ¡£

FastAPIè‡ªåŠ¨ç”Ÿæˆçš„äº¤äº’å¼APIæ–‡æ¡£ï¼š
- Swagger UI: http://localhost:8000/docs
- ReDoc: http://localhost:8000/redoc

## ğŸ“ å¾…å®ç°åŠŸèƒ½

### çŸ­æœŸè®¡åˆ’
- [ ] å®Œå–„éŸ³é¢‘æ’­æ”¾å™¨ç»„ä»¶ï¼ˆæ³¢å½¢æ˜¾ç¤ºï¼‰
- [ ] å®ç°çœŸå®çš„TTSå¼•æ“å¯¹æ¥
- [ ] æ·»åŠ éŸ³é¢‘ç¼–è¾‘åŠŸèƒ½ï¼ˆå‰ªè¾‘ã€è°ƒæ•´ï¼‰
- [ ] æ‰¹é‡æ“ä½œä¼˜åŒ–ï¼ˆè¿›åº¦æ¡ã€å–æ¶ˆï¼‰

### ä¸­æœŸè®¡åˆ’
- [ ] ç”¨æˆ·è®¤è¯å’Œæƒé™ç®¡ç†
- [ ] é¡¹ç›®åˆ†äº«å’Œåä½œ
- [ ] æ¨¡æ¿å¸‚åœº
- [ ] é¡¹ç›®ç»Ÿè®¡åˆ†æ

### é•¿æœŸè®¡åˆ’
- [ ] AIå£°éŸ³å…‹éš†
- [ ] å¤šè¯­è¨€æ”¯æŒ
- [ ] ç§»åŠ¨ç«¯é€‚é…
- [ ] äº‘ç«¯TTSé›†æˆ

## ğŸ› å·²çŸ¥é—®é¢˜

1. **éŸ³é¢‘æ’­æ”¾å™¨**: 
   - æ³¢å½¢æ˜¾ç¤ºä¸ºæ¨¡æ‹Ÿæ•°æ®ï¼Œéœ€è¦å®ç°çœŸå®éŸ³é¢‘è§£æ
   - æ’­æ”¾è¿›åº¦åŒæ­¥éœ€è¦ä¼˜åŒ–

2. **æ‰¹é‡ç”Ÿæˆ**:
   - éœ€è¦æ·»åŠ ä»»åŠ¡é˜Ÿåˆ—å’Œè¿›åº¦è¿½è¸ª
   - å¼‚æ­¥å¤„ç†æœºåˆ¶å¾…å®Œå–„

3. **æ–‡ä»¶ç®¡ç†**:
   - éœ€è¦æ·»åŠ æ–‡ä»¶æ¸…ç†æœºåˆ¶
   - å­˜å‚¨ç©ºé—´ç›‘æ§

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **æ•°æ®åº“ä¼˜åŒ–**
   - æ·»åŠ é€‚å½“çš„ç´¢å¼•
   - å®ç°æŸ¥è¯¢ç¼“å­˜
   - æ•°æ®åˆ†é¡µä¼˜åŒ–

2. **éŸ³é¢‘å¤„ç†**
   - ä½¿ç”¨ä»»åŠ¡é˜Ÿåˆ—ï¼ˆCelery/RQï¼‰
   - éŸ³é¢‘æµå¼ä¼ è¾“
   - CDNåŠ é€Ÿ

3. **å‰ç«¯ä¼˜åŒ–**
   - ç»„ä»¶æ‡’åŠ è½½
   - è™šæ‹Ÿæ»šåŠ¨ï¼ˆé•¿åˆ—è¡¨ï¼‰
   - éŸ³é¢‘æ–‡ä»¶ç¼“å­˜

## ğŸ”’ å®‰å…¨å»ºè®®

1. **ç”Ÿäº§ç¯å¢ƒ**
   - ä¿®æ”¹æ‰€æœ‰é»˜è®¤å¯†ç 
   - å¯ç”¨HTTPS
   - é…ç½®é˜²ç«å¢™
   - é™åˆ¶APIè®¿é—®é€Ÿç‡

2. **æ•°æ®å®‰å…¨**
   - å®šæœŸå¤‡ä»½æ•°æ®åº“
   - æ–‡ä»¶åŠ å¯†å­˜å‚¨
   - è®¿é—®æ—¥å¿—è®°å½•

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œå†…éƒ¨ä½¿ç”¨ã€‚

## ğŸ‘¥ è´¡çŒ®

å¦‚éœ€è´¡çŒ®ä»£ç æˆ–æŠ¥å‘Šé—®é¢˜ï¼Œè¯·è”ç³»é¡¹ç›®ç»´æŠ¤è€…ã€‚

---

**ç‰ˆæœ¬**: v1.0.0  
**åˆ›å»ºæ—¥æœŸ**: 2025-10-23  
**æœ€åæ›´æ–°**: 2025-10-23

